name: Test de Secret

on: 
  workflow_dispatch: # Permet de lancer le test manuellement

jobs:
  check-secret:
    runs-on: self-hosted
    steps:
      - name: Tentative d'affichage simple
        env:
          MY_SECRET: ${{ secrets.MON_TEST_SECRET }}
        run: |
          echo "Voici ce que GitHub affiche pour un secret :"
          echo "La valeur est : $MY_SECRET"

      - name: Vérification de la longueur (Test de présence)
        env:
          MY_SECRET: ${{ secrets.MON_TEST_SECRET }}
        run: |
          if [ -z "$MY_SECRET" ]; then
            echo "ERREUR : Le secret est vide ou inaccessible."
            exit 1
          else
            echo "SUCCÈS : Le secret est bien chargé (longueur : ${#MY_SECRET} caractères)."
          fi
